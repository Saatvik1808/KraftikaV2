# Firestore Integration Setup

This document explains how to set up and use Firestore for your Kraftika products instead of the local JSON files.

## What's Been Updated

1. **Products Service** (`src/services/products.ts`) - Handles all Firestore operations
2. **Products Page** (`src/app/products/page.tsx`) - Now fetches from Firestore
3. **Product Detail Page** (`src/app/products/[id]/page.tsx`) - Fetches individual products from Firestore
4. **Product Showcase Component** (`src/components/sections/product-showcase.tsx`) - Shows featured products from Firestore
5. **Admin Actions** (`src/app/admin/products/actions.ts`) - Updated to work with local image URLs

## Image Management

Since you want to use local public folder images (like `/aes.jpeg`), the system now:

- Expects image URLs to be relative paths to files in your `public/` folder
- Automatically adds a leading `/` if missing
- No longer uploads images to Firebase Storage

## Setting Up Sample Data

### Option 1: Use the Seeding Script

1. Run the seeding script to populate your Firestore database:
   ```bash
   npm run firestore:seed
   ```

This will add 8 sample products with the correct image URLs pointing to your public folder images.

### Option 2: Add Products Manually via Admin Panel

1. Go to `/admin/products/new`
2. Fill in the product details
3. **Important**: You'll need to manually add the image file to your `public/` folder
4. Set the `imageUrl` field to the path (e.g., `/aes.jpeg`)

## Database Structure

Each product document in Firestore should have this structure:

```typescript
{
  id: string,           // Auto-generated by Firestore
  name: string,         // Product name
  description: string,  // Product description
  price: number,        // Price in your currency
  imageUrl: string,     // Path to image in public folder (e.g., "/aes.jpeg")
  scentCategory: string, // "Citrus", "Floral", "Sweet", "Fresh", "Fruity"
  scentNotes: string,   // Detailed scent description
  burnTime: string,     // How long the candle burns
  ingredients: string,  // List of ingredients
  popularity: number,   // Popularity score (0-100)
  createdAt: string     // ISO date string
}
```

## Available Image Files

Based on your public folder, you have these images available:
- `/aes.jpeg` - Citrus Sunrise
- `/ocean.jpeg` - Ocean Breeze
- `/valentine.jpeg` - Vanilla Dreams
- `/flower.jpeg` - Lavender Fields
- `/coffee.jpeg` - Coffee Mornings
- `/grass.jpeg` - Grass & Green
- `/mocha.jpeg` - Mocha Delight
- `/candleImage.jpeg` - Candle Glow

## Testing the Integration

1. **Seed the database**: `npm run firestore:seed`
2. **Start your dev server**: `npm run dev`
3. **Visit the products page**: `/products`
4. **Check individual products**: `/products/[product-id]`

## Troubleshooting

### No Products Showing
- Check if your Firestore database has products
- Verify the collection name is "products"
- Check browser console for any errors

### Images Not Loading
- Ensure image files exist in your `public/` folder
- Check that image URLs in Firestore start with `/`
- Verify file permissions

### Firestore Connection Issues
- Check your Firebase configuration in `src/lib/firebase.ts`
- Ensure your Firebase project has Firestore enabled
- Check if you need to set up Firestore rules

## Next Steps

1. **Reviews System**: Implement reviews fetching from Firestore
2. **Image Upload**: If you want to handle image uploads, you can modify the admin actions to upload to Firebase Storage and then copy to public folder
3. **Real-time Updates**: Add real-time listeners for product updates
4. **Caching**: Implement caching strategies for better performance

## Security Rules

Make sure your Firestore security rules allow read access to the products collection:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /products/{productId} {
      allow read: if true;  // Anyone can read products
      allow write: if request.auth != null;  // Only authenticated users can write
    }
  }
}
```
